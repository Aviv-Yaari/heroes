(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{133:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(42),a=n.n(c),l=n(5),s=n.n(l),u=n(11),i=n(26),o=n(8),p=n(1);function j(){return Object(p.jsx)("footer",{className:"app-footer",children:"Aviv Yaari, 2021"})}var d,b,f,m,h,O,x,v,g,y,w,E,k,C,N,S=n(9),F=n(85),M=n.n(F),A=n(32),P=["title","titleId"];function L(){return L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}function _(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function D(e,t){var n=e.title,c=e.titleId,a=_(e,P);return r.createElement("svg",L({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 291.764 291.764",style:{enableBackground:"new 0 0 291.764 291.764"},xmlSpace:"preserve",ref:t,"aria-labelledby":c},a),n?r.createElement("title",{id:c},n):null,r.createElement("g",null,r.createElement("path",{style:{fill:"#EFC75E"},d:"M145.882,0c80.573,0,145.882,65.319,145.882,145.882s-65.31,145.882-145.882,145.882 S0,226.446,0,145.882S65.31,0,145.882,0z"}),r.createElement("path",{style:{fill:"#CC9933"},d:"M145.882,27.353c-65.465,0-118.529,53.065-118.529,118.529s53.065,118.529,118.529,118.529 s118.529-53.065,118.529-118.529S211.347,27.353,145.882,27.353z M145.882,246.176c-55.39,0-100.294-44.904-100.294-100.294 S90.493,45.588,145.882,45.588s100.294,44.904,100.294,100.294S201.281,246.176,145.882,246.176z M158.009,138.269 c-5.452-2.289-25.493-5.452-25.493-14.214c0-6.464,7.495-8.334,11.99-8.334c4.094,0,8.999,1.295,11.589,3.875 c1.641,1.577,2.316,2.726,2.854,4.313c0.684,1.869,1.094,3.875,3.684,3.875h13.357c3.136,0,3.957-0.574,3.957-4.021 c0-14.789-11.589-23.122-24.809-25.994V86.28c0-2.58-0.821-4.167-3.957-4.167h-10.64c-3.136,0-3.957,1.577-3.957,4.167v11.051 c-14.178,2.726-26.031,11.634-26.031,27.718c0,18.235,12.683,23.979,26.441,28.566c11.589,3.884,23.724,4.021,23.724,12.063 s-5.99,9.765-13.357,9.765c-5.051,0-10.631-1.304-13.366-4.741c-1.769-2.152-2.453-4.021-2.58-5.89 c-0.274-3.592-1.769-4.021-4.914-4.021H113.28c-3.136,0-3.957,0.729-3.957,4.021c0,16.366,13.093,26.286,27.262,29.441v11.206 c0,2.58,0.821,4.167,3.957,4.167h10.64c3.136,0,3.957-1.586,3.957-4.167v-10.905c16.084-2.453,27.125-12.209,27.125-29.441 C182.28,145.591,167.829,141.424,158.009,138.269z"})),d||(d=r.createElement("g",null)),b||(b=r.createElement("g",null)),f||(f=r.createElement("g",null)),m||(m=r.createElement("g",null)),h||(h=r.createElement("g",null)),O||(O=r.createElement("g",null)),x||(x=r.createElement("g",null)),v||(v=r.createElement("g",null)),g||(g=r.createElement("g",null)),y||(y=r.createElement("g",null)),w||(w=r.createElement("g",null)),E||(E=r.createElement("g",null)),k||(k=r.createElement("g",null)),C||(C=r.createElement("g",null)),N||(N=r.createElement("g",null)))}var T=r.forwardRef(D),z=(n.p,n(84)),B="/api/",H=n.n(z).a.create({withCredentials:!0});function I(e){return R.apply(this,arguments)}function R(){return R=Object(u.a)(s.a.mark((function e(t){var n,r,c,a,l,u,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"GET",r=i.length>2&&void 0!==i[2]?i[2]:null,e.prev=2,e.next=5,H({url:"".concat(B).concat(t),method:n,data:r,params:"GET"===n?r:null});case 5:return c=e.sent,e.abrupt("return",c.data);case 9:throw e.prev=9,e.t0=e.catch(2),u=(null===(a=e.t0.response)||void 0===a||null===(l=a.status)||void 0===l?void 0:l.toString())||"An error occured",new Error(u);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),R.apply(this,arguments)}var U=function(e,t){return I(e,"GET",t)},q=function(e,t){return I(e,"POST",t)},J=function(e,t){return I(e,"PUT",t)},X=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("auth/login",{username:t,password:n});case 2:return Z(r=e.sent),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.clear(),e.abrupt("return",q("auth/logout"));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(s.a.mark((function e(t,n,r){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("auth/signup",{username:t,fullname:n,password:r});case 2:return Z(c=e.sent),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("auth/current");case 2:return(t=e.sent)?Z(t):sessionStorage.clear(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Z(e){sessionStorage.setItem("user",JSON.stringify(e))}var $,K,Q,W,ee,te,ne,re,ce,ae,le,se,ue,ie,oe,pe={login:X,signup:V,logout:G,getCurrentUser:function(){try{var e=sessionStorage.getItem("user");return e?JSON.parse(e):null}catch(t){return null}},reloadUser:Y,checkRegistration:function(e){var t=e.username,n=e.fullname,r=e.password,c=[],a=[],l=[];return r.length<8&&c.push("Password must be at least 8 characters long"),/[A-Z]/.test(r)||c.push("Password must contain a capital letter"),/^[a-zA-Z0-9]*$/.test(r)&&c.push("Password must contain a special character"),/[0-9]/.test(r)||c.push("Password must contain a digit"),t.length||a.push("User name is required"),n.length||l.push("Full name is required"),{password:c,username:a,fullname:l}}},je=function(e,t){return function(){var n=Object(u.a)(s.a.mark((function n(r){var c;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,pe.login(e,t);case 2:c=n.sent,r({type:"SET_USER",user:c});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},de=function(e,t,n){return function(){var r=Object(u.a)(s.a.mark((function r(c){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pe.signup(e,t,n);case 2:a=r.sent,c({type:"SET_USER",user:a});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},be=function(){return function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.reloadUser();case 2:n=e.sent,t({type:"SET_USER",user:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function fe(e){var t=e.user,n=Object(r.useState)(!1),c=Object(S.a)(n,2),a=c[0],l=c[1],s=function(){l((function(e){return!e}))};return Object(p.jsxs)("header",{className:"flex space-between app-header",children:[Object(p.jsxs)("div",{className:"flex align-center",children:[Object(p.jsx)("h1",{children:Object(p.jsx)(A.c,{to:"/",children:"Heroes"})}),t&&Object(p.jsx)(A.c,{to:"/explore",children:"Explore"})]}),t&&Object(p.jsxs)("section",{className:"flex username",onClick:s,children:[Object(p.jsxs)("div",{className:"flex align-center user-money",children:[Object(p.jsx)(T,{className:"icon-coin"}),Object(p.jsx)("span",{children:t.money})]}),Object(p.jsxs)("div",{className:"flex align-center",children:[Object(p.jsx)("span",{children:t.username}),Object(p.jsx)(M.a,{})]})]}),t&&a&&Object(p.jsx)(me,{user:t,onClose:s})]})}function me(e){var t=e.user,n=e.onClose,r=Object(i.b)();return Object(p.jsx)("div",{className:"overlay",onClick:n,children:Object(p.jsxs)("section",{className:"user-menu",children:[Object(p.jsxs)("div",{className:"money",children:[Object(p.jsx)(T,{className:"icon-coin"}),Object(p.jsx)("span",{children:null===t||void 0===t?void 0:t.money})]}),Object(p.jsx)("button",{className:"full-width btn-link",onClick:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.logout();case 2:t({type:"SET_USER",user:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Logout"})]})})}var he=["title","titleId"];function Oe(){return Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}function xe(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function ve(e,t){var n=e.title,c=e.titleId,a=xe(e,he);return r.createElement("svg",Oe({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 511.992 511.992",style:{enableBackground:"new 0 0 511.992 511.992"},xmlSpace:"preserve",ref:t,"aria-labelledby":c},a),n?r.createElement("title",{id:c},n):null,r.createElement("path",{style:{fill:"#ED5564"},d:"M181.552,371.275c0-2.828-1.125-5.546-3.125-7.546l-30.171-30.172 c-4.164-4.171-10.922-4.171-15.086,0l-95.959,95.968c-4.164,4.156-4.164,10.906,0,15.078l30.171,30.171 c4.164,4.155,10.921,4.155,15.085,0l95.959-95.968C180.427,376.807,181.552,374.103,181.552,371.275z"}),r.createElement("path",{style:{fill:"#CCD1D9"},d:"M490.804,96.617c1.406-1.414,2.391-3.203,2.844-5.148l18.078-78.405 c0.812-3.586-0.266-7.336-2.859-9.938s-6.359-3.68-9.938-2.852l-78.404,18.062c-1.953,0.453-3.734,1.438-5.141,2.852L140.717,295.84 c-4.164,4.172-4.164,10.922,0,15.094l60.335,60.342c2,2,4.719,3.125,7.546,3.125c2.828,0,5.539-1.125,7.539-3.125L490.804,96.617z"}),r.createElement("path",{style:{opacity:.2,fill:"#FFFFFF",enableBackground:"new"},d:"M508.866,3.126c-2.594-2.602-6.359-3.68-9.938-2.852 l-78.404,18.062c-1.953,0.453-3.734,1.438-5.141,2.852L140.717,295.84c-4.164,4.172-4.164,10.922,0,15.094l60.335,60.342 c2,2,4.719,3.125,7.546,3.125c2.828,0,5.539-1.125,7.539-3.125L490.804,96.617c1.406-1.414,2.391-3.203,2.844-5.148l18.078-78.405 C512.538,9.477,511.46,5.727,508.866,3.126z M501.319,10.665L483.257,89.07L208.598,363.729l-60.342-60.343L422.915,28.735 L501.319,10.665L501.319,10.665L501.319,10.665z"}),r.createElement("path",{style:{fill:"#AAB2BC"},d:"M170.88,341.104c-4.164-4.172-4.164-10.921,0-15.093l193.238-193.224 c4.172-4.164,10.922-4.164,15.078,0c4.172,4.164,4.172,10.922,0,15.086l-193.23,193.23 C181.802,345.261,175.052,345.261,170.88,341.104z"}),r.createElement("g",null,r.createElement("path",{style:{fill:"#DA4453"},d:"M77.249,389.478h90.506l10.672-10.672c2-2,3.125-4.703,3.125-7.531c0-1.078-0.164-2.125-0.469-3.125 H98.584L77.249,389.478z"}),r.createElement("path",{style:{fill:"#DA4453"},d:"M143.842,413.4H53.328l-16.117,16.125c-1.484,1.484-2.43,3.297-2.859,5.203h88.155L143.842,413.4z"})),r.createElement("g",null,r.createElement("path",{style:{fill:"#FFCE54"},d:"M253.848,393.9L118.084,258.138c-4.164-4.164-10.914-4.164-15.078,0l-22.632,22.624 c-4.164,4.172-4.164,10.922,0,15.078l135.763,135.764c2,2,4.711,3.125,7.539,3.125c2.836,0,5.547-1.125,7.547-3.125l22.625-22.625 C258.011,404.822,258.011,398.057,253.848,393.9z"}),r.createElement("path",{style:{fill:"#FFCE54"},d:"M85.327,469.321c0-11.391-4.438-22.108-12.492-30.171c-16.64-16.641-43.702-16.641-60.342,0 c-8.055,8.062-12.492,18.78-12.492,30.171c0,11.39,4.438,22.108,12.492,30.171l0,0l0,0c8.062,8.062,18.773,12.5,30.171,12.5 s22.109-4.438,30.171-12.5C80.89,491.43,85.327,480.711,85.327,469.321z"})),r.createElement("ellipse",{style:{fill:"#F6BB42"},cx:42.664,cy:469.316,rx:10.664,ry:10.671}),$||($=r.createElement("g",null)),K||(K=r.createElement("g",null)),Q||(Q=r.createElement("g",null)),W||(W=r.createElement("g",null)),ee||(ee=r.createElement("g",null)),te||(te=r.createElement("g",null)),ne||(ne=r.createElement("g",null)),re||(re=r.createElement("g",null)),ce||(ce=r.createElement("g",null)),ae||(ae=r.createElement("g",null)),le||(le=r.createElement("g",null)),se||(se=r.createElement("g",null)),ue||(ue=r.createElement("g",null)),ie||(ie=r.createElement("g",null)),oe||(oe=r.createElement("g",null)))}var ge,ye,we,Ee,ke,Ce,Ne,Se,Fe,Me,Ae,Pe,Le,_e,De,Te=r.forwardRef(ve),ze=(n.p,["title","titleId"]);function Be(){return Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Be.apply(this,arguments)}function He(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function Ie(e,t){var n=e.title,c=e.titleId,a=He(e,ze);return r.createElement("svg",Be({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":c},a),n?r.createElement("title",{id:c},n):null,r.createElement("path",{style:{fill:"#FFD782"},d:"M472.68,102.247c-0.189-7.545-6.078-13.572-13.558-14.584c-0.03-0.004-0.06-0.008-0.088-0.012 c-29.945-4.285-52.964-30.038-52.964-61.167v-0.143c0.01-8.15-5.858-15.087-13.912-16.331C357.287,4.625,311.323,0,256.001,0 S154.714,4.625,119.844,10.008c-8.054,1.244-13.923,8.181-13.912,16.331v0.143c0,31.129-23.019,56.883-52.966,61.167 c-0.029,0.004-0.058,0.008-0.088,0.012c-7.48,1.012-13.368,7.038-13.558,14.584C30.044,473.012,256.001,512,256.001,512 S481.957,473.012,472.68,102.247z"}),r.createElement("path",{style:{fill:"#C7CFE2"},d:"M256.001,17.655c46.048,0,90.592,3.243,132.418,9.641c0.394,38.37,28.716,71.349,66.665,77.604 c3.242,144.414-30.692,257.514-98.191,327.182c-43.81,45.218-89.063,58.894-100.914,61.843 c-25.763-6.365-206.388-62.873-199.06-389.02c37.79-6.129,66.188-39.079,66.664-77.609 C165.407,20.898,209.953,17.655,256.001,17.655"}),r.createElement("path",{style:{fill:"#AEB5CA"},d:"M256.001,35.31c40.181,0,79.172,2.514,116.125,7.481c5.999,35.471,31.238,64.759,65.501,75.967 c0.818,133.1-31.373,237.004-93.415,301.038c-36.459,37.63-74.253,51.652-88.246,55.823c-15.363-4.569-58.521-20.839-98.489-67.738 c-56.017-65.731-83.951-162.937-83.105-289.091c34.212-11.147,59.449-40.441,65.485-75.997 C176.815,37.826,215.816,35.31,256.001,35.31 M256.001,17.655c-46.048,0-90.593,3.243-132.419,9.641 c-0.474,38.53-28.874,71.48-66.664,77.609c-7.327,326.146,173.298,382.656,199.06,389.02c11.851-2.948,57.103-16.626,100.914-61.843 c67.499-69.668,101.434-182.769,98.191-327.182c-37.949-6.255-66.271-39.234-66.665-77.604 C346.593,20.898,302.048,17.655,256.001,17.655L256.001,17.655z"}),r.createElement("path",{style:{fill:"#FFD782"},d:"M256.001,88.276c26.163,0,51.807,1.131,76.597,3.372c11.558,24.072,29.351,44.595,51.563,59.462 c-3.962,103.273-30.691,183.015-77.988,231.832c-18.477,19.07-37.142,30.05-50.165,36.062c-14.78-6.9-36.832-20.381-58.219-45.475 c-42.912-50.354-66.403-125.055-69.987-222.348c22.215-14.863,40.022-35.416,51.586-59.53 C204.186,89.407,229.836,88.276,256.001,88.276"}),r.createElement("path",{style:{fill:"#FFC36E"},d:"M198.759,90.354c-6.461,0.428-13.015,0.721-19.371,1.295c-11.564,24.115-29.372,44.666-51.586,59.53 c3.585,97.293,27.076,171.994,69.987,222.348c21.386,25.095,43.439,38.575,58.219,45.475 C230.469,389.512,163.95,265.354,198.759,90.354z"}),r.createElement("path",{style:{fill:"#AEB5CA"},d:"M256.001,88.276c26.163,0,51.807,1.131,76.597,3.372c11.558,24.072,29.351,44.595,51.563,59.462 c-3.962,103.273-30.691,183.015-77.988,231.832c-18.477,19.07-37.142,30.05-50.165,36.062c-14.78-6.9-36.832-20.381-58.219-45.475 c-42.912-50.354-66.403-125.055-69.987-222.348c22.215-14.863,40.022-35.416,51.586-59.53 C204.186,89.407,229.836,88.276,256.001,88.276 M256.001,70.621c-26.607,0-52.919,1.16-78.202,3.446l-9.992,0.904l-4.338,9.046 c-10.19,21.248-25.919,39.399-45.485,52.491l-8.188,5.479l0.363,9.845c3.733,101.318,28.695,179.761,74.194,233.15 c23.459,27.528,47.854,42.396,64.188,50.022l7.426,3.467l7.442-3.434c13.928-6.429,34.852-18.552,55.446-39.806 c50.142-51.754,78.826-135.935,82.951-243.442l0.378-9.86l-8.201-5.489c-19.564-13.096-35.287-31.225-45.469-52.434l-4.34-9.039 l-9.986-0.903C308.909,71.779,282.604,70.621,256.001,70.621L256.001,70.621z"}),r.createElement("g",null,r.createElement("circle",{style:{fill:"#FFD782"},cx:256.001,cy:52.966,r:8.828}),r.createElement("circle",{style:{fill:"#FFD782"},cx:93.783,cy:132.414,r:8.828}),r.createElement("circle",{style:{fill:"#FFD782"},cx:418.218,cy:132.414,r:8.828}),r.createElement("circle",{style:{fill:"#FFD782"},cx:121.17,cy:308.966,r:8.828}),r.createElement("circle",{style:{fill:"#FFD782"},cx:390.831,cy:308.966,r:8.828}),r.createElement("circle",{style:{fill:"#FFD782"},cx:256.001,cy:455.724,r:8.828})),r.createElement("circle",{style:{fill:"#FFE3A8"},cx:312.232,cy:197.473,r:32.044}),r.createElement("circle",{style:{fill:"#FFF3D9"},cx:271.14,cy:136.364,r:20.028}),ge||(ge=r.createElement("g",null)),ye||(ye=r.createElement("g",null)),we||(we=r.createElement("g",null)),Ee||(Ee=r.createElement("g",null)),ke||(ke=r.createElement("g",null)),Ce||(Ce=r.createElement("g",null)),Ne||(Ne=r.createElement("g",null)),Se||(Se=r.createElement("g",null)),Fe||(Fe=r.createElement("g",null)),Me||(Me=r.createElement("g",null)),Ae||(Ae=r.createElement("g",null)),Pe||(Pe=r.createElement("g",null)),Le||(Le=r.createElement("g",null)),_e||(_e=r.createElement("g",null)),De||(De=r.createElement("g",null)))}var Re=r.forwardRef(Ie),Ue=(n.p,n(93)),qe=n(161);function Je(){return Object(i.c)((function(e){return e.userModule.user}))}function Xe(e){var t=e.type,n=e.hero,r=e.onTrain,c=e.onBuy,a=n._id,l=n.name,s=n.ability,u=n.currentPower,i=n.userId,j=n.price,d=n.trainsToday,b=n.trainingHistory,f=Je(),m=Object(o.f)(),h=5===d,O=f&&f.money<n.price;return Object(p.jsxs)("li",{className:"hero-preview flex column",onClick:function(){return m("/hero/".concat(a))},children:[Object(p.jsxs)("div",{className:"flex space-between align-center",children:["attacker"===s?Object(p.jsx)(Te,{className:"img-ability"}):Object(p.jsx)(Re,{className:"img-ability"}),Object(p.jsx)("span",{children:l}),Object(p.jsx)("span",{className:"current-power",children:u})]}),Object(p.jsx)("img",{className:"img-hero",src:"https://robohash.org/".concat(l,"?size=200x200"),alt:""}),"Explore"===t&&i&&Object(p.jsxs)("p",{className:"text-center",children:["Owned by ",i.username]}),Object(p.jsxs)("div",{className:"actions",children:[!i&&c&&Object(p.jsxs)("button",{className:"flex align-center justify-center ".concat(O?"disabled":""),onClick:function(e){e.stopPropagation(),O||c(a)},children:[Object(p.jsx)("span",{children:"Buy "}),Object(p.jsx)(T,{className:"icon-coin"}),Object(p.jsx)("span",{children:j||"Free"})]}),r&&Object(p.jsx)("button",{className:h?"disabled":"",onClick:function(e){e.stopPropagation(),h||r(a)},children:h?Object(Ue.a)(Object(qe.a)(b[4].date,{days:1})):"Train ".concat(d,"/5")})]})]},a)}function Ge(e){var t=e.heroes,n=e.type,r=e.onTrain,c=e.onBuy;return Object(p.jsx)("ul",{className:"hero-list",children:t.map((function(e){return Object(p.jsx)(Xe,{hero:e,type:n,onTrain:r,onBuy:c},e._id)}))})}var Ve=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in n=new URLSearchParams,t)n.append(r,t[r]);return e.next=4,U("hero",n);case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("hero/".concat(t,"/train"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("hero/".concat(t,"/assign"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("hero",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke={query:Ve,train:Ye,buy:Ze,add:$e},Qe=n(162);function We(){return Object(p.jsx)("main",{className:" flex align-center justify-center",children:Object(p.jsx)(Qe.a,{})})}var et=function(e){return function(t){return t({type:"SET_ALERT",alert:e})}};function tt(){var e=Je(),t=Object(i.b)(),n=Object(r.useState)(null),c=Object(S.a)(n,2),a=c[0],l=c[1];Object(r.useEffect)((function(){var n=function(){var n=Object(u.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Ke.query({userId:e._id});case 5:r=n.sent,l(r),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),t(et({message:"Could not get hero data",type:"error"}));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();n()}),[t,e]);var o=function(){var e=Object(u.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ke.train(n);case 3:return r=e.sent,e.next=6,t(be());case 6:l((function(e){return e.map((function(e){return e._id===r._id?r:e}))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(et({message:"Could not train hero",type:"error"}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return a?Object(p.jsx)("main",{className:"container",children:Object(p.jsxs)("div",{className:"content my-heroes-page",children:[Object(p.jsx)("h2",{className:"text-center",children:"My heroes"}),0===a.length&&Object(p.jsx)("div",{children:"You don't own any heroes yet."}),a.length>0&&Object(p.jsx)(Ge,{heroes:a,type:"My Heroes",onTrain:o})]})}):Object(p.jsx)(We,{})}var nt=n(12),rt=n(7);function ct(e){return Object(p.jsxs)("div",{className:"full-width",children:[Object(p.jsx)("input",Object(nt.a)({className:"".concat(e.className||""," ").concat(e.errors.length?"invalid":"")},e)),e.errors.map((function(e,t){return Object(p.jsx)("p",{children:e},t)}))]})}function at(){var e=Object(r.useState)("login"),t=Object(S.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)({username:"",fullname:"",password:""}),l=Object(S.a)(a,2),j=l[0],d=l[1],b=Object(r.useState)({username:[],fullname:[],password:[]}),f=Object(S.a)(b,2),m=f[0],h=f[1],O=Object(i.c)((function(e){return e.userModule.user})),x=Object(i.b)(),v=Object(o.f)(),g=m.username.length||m.fullname.length||m.password.length;Object(r.useEffect)((function(){O&&v("/")}),[O,v]);var y=function(e){d((function(t){var n=t.username,r=t.fullname,c=t.password;if(g){var a=pe.checkRegistration(Object(rt.a)({username:n,fullname:r,password:c},e.target.name,e.target.value));h(a)}return Object(nt.a)(Object(nt.a)({},t),{},Object(rt.a)({},e.target.name,e.target.value))}))},w=function(){var e=Object(u.a)(s.a.mark((function e(t){var r,c,a,l,u,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=j.username,c=j.fullname,a=j.password,e.prev=2,"login"!==n){e.next=9;break}return e.next=6,x(je(r,a));case 6:x(et({message:"Logged in successfuly",type:"success"})),e.next=15;break;case 9:if(!((l=pe.checkRegistration(Object(nt.a)({},j))).username.length||l.fullname.length||l.password.length)){e.next=12;break}return e.abrupt("return",h(l));case 12:return e.next=14,x(de(r,c,a));case 14:x(et({message:"Signed up successfuly",type:"success"}));case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(2),u=e.t0,i=u.message,"401"===(o=void 0===i?"Could not log in":i)&&(o="Invalid username / password"),x(et({message:"login"===n?o:"Could not sign up",type:"error"}));case 22:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(je(t,n));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),x(et({message:"An error occured, please try again later",type:"error"}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("form",{className:"content flex column align-center auth-page",onSubmit:w,children:[Object(p.jsxs)("h2",{children:[n.charAt(0).toUpperCase()+n.slice(1)," to Heroes"]}),Object(p.jsx)(ct,{name:"username",type:"text",placeholder:"Username",value:j.username,onChange:y,errors:m.username}),Object(p.jsx)(ct,{name:"password",type:"password",placeholder:"Password",value:j.password,onChange:y,errors:m.password}),"signup"===n&&Object(p.jsx)(ct,{name:"fullname",type:"text",placeholder:"Full name",value:j.fullname,onChange:y,errors:m.fullname}),Object(p.jsx)("button",{className:"full-width ".concat(g?"disabled":""),children:"Continue"}),Object(p.jsxs)("p",{children:["login"===n?"Not a member yet?":"Already a member?",Object(p.jsx)("button",{type:"button",className:"btn-link",onClick:function(){c("login"===n?"signup":"login"),d({username:"",fullname:"",password:""}),h({username:[],fullname:[],password:[]})},children:"login"===n?"Join now":"Log in"})]}),Object(p.jsx)("button",{type:"button",className:"btn-link",onClick:function(){return E("avivyar","Aviv!!1234")},children:"Easy login - dev purposes"}),Object(p.jsx)("button",{type:"button",className:"btn-link",onClick:function(){return E("admin","Admin!!1234")},children:"Easy admin login - dev purposes"})]})})}function lt(){var e=Object(r.useState)(null),t=Object(S.a)(e,2),n=t[0],c=t[1],a=Je(),l=Object(i.b)();Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ke.query();case 3:t=e.sent,n=t.filter((function(e){var t;return(null===(t=e.userId)||void 0===t?void 0:t._id)!==(null===a||void 0===a?void 0:a._id)})),c(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l(et({message:"Could not get hero data",type:"error"}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();a&&e()}),[l,a]);var o=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ke.buy(t);case 3:return n=e.sent,c((function(e){return e.map((function(e){return e._id===n._id?n:e}))})),e.next=7,l(be());case 7:l(et({message:"Hero bought",type:"success"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),l(et({message:"Could not buy hero",type:"error"}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return n?Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("main",{className:"content explore-page",children:[Object(p.jsx)("h2",{children:"Explore"}),(null===a||void 0===a?void 0:a.isAdmin)&&Object(p.jsx)(A.b,{to:"/add",children:"Admin: Add a Hero"}),Object(p.jsx)(Ge,{heroes:n,type:"Explore",onBuy:o})]})}):Object(p.jsx)(We,{})}function st(e){var t=e.selectedColors,n=e.colors,r=e.onClick,c=function(e,n){t&&r&&(e?t.delete(n):t.add(n),r(new Set(t)))};return Object(p.jsx)("section",{className:"flex wrap color-list",children:n.map((function(e){var n=(null===t||void 0===t?void 0:t.has(e))||!1;return Object(p.jsx)("span",{className:"color ".concat(n?"selected":""),style:{color:e,cursor:r?"pointer":"default"},onClick:function(){return c(n,e)},children:e},e)}))})}function ut(){var e=Je(),t=Object(r.useState)({name:"",price:"",ability:"",power:"",colors:new Set}),n=Object(S.a)(t,2),c=n[0],a=n[1],l=Object(o.f)();Object(r.useEffect)((function(){(null===e||void 0===e?void 0:e.isAdmin)||l("/")}),[l,e]);var i=function(e){a((function(t){return Object(nt.a)(Object(nt.a)({},t),{},Object(rt.a)({},e.target.name,e.target.value))}))},j=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n=+c.power>0?[{date:Date.now(),power:+c.power}]:[],e.next=5,Ke.add(Object(nt.a)(Object(nt.a)({},c),{},{trainingHistory:n,colors:Array.from(c.colors)}));case 5:l("/explore"),et({message:"Hero added",type:"success"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),et({message:"Could not add hero",type:"error"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return e?Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("form",{className:"content add-page flex column",onSubmit:j,children:[Object(p.jsx)("h2",{children:"Create a Hero"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{name:"name",type:"text",placeholder:"Name",value:c.name,onChange:i,required:!0}),Object(p.jsx)("input",{name:"price",type:"number",placeholder:"Price",value:c.price,onChange:i,required:!0}),Object(p.jsx)("input",{name:"power",type:"number",placeholder:"Power",value:c.power,onChange:i,required:!0})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Ability:"}),Object(p.jsxs)("section",{className:"flex ability",children:[Object(p.jsxs)("div",{className:"attacker"===c.ability?"selected":"",onClick:function(){return a((function(e){return Object(nt.a)(Object(nt.a)({},e),{},{ability:"attacker"})}))},children:[Object(p.jsx)(Te,{}),Object(p.jsx)("span",{children:"Attacker"})]}),Object(p.jsxs)("div",{className:"defender"===c.ability?"selected":"",onClick:function(){return a((function(e){return Object(nt.a)(Object(nt.a)({},e),{},{ability:"defender"})}))},children:[Object(p.jsx)(Re,{}),Object(p.jsx)("span",{children:"Defender"})]})]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Colors:"}),Object(p.jsx)(st,{selectedColors:c.colors,colors:["red","green","blue"],onClick:function(e){return a((function(t){return Object(nt.a)(Object(nt.a)({},t),{},{colors:e})}))}})]}),Object(p.jsx)("button",{children:"Create"})]})}):Object(p.jsx)("div",{children:"Loading..."})}var it=n(91);function ot(e){var t,n=e.hero,r=n.name,c=n.ability,a=n.colors,l=void 0===a?[]:a,s=n.currentPower,u=n.trainingHistory,i=n.userId,o=n.price,j=u.length&&u[u.length-1].date;return Object(p.jsxs)("section",{className:"hero-details flex column align-center",children:[Object(p.jsx)("h2",{children:"Hero Details"}),Object(p.jsx)("img",{className:"img-hero",src:"https://robohash.org/".concat(n.name,"?size=300x300"),alt:""}),Object(p.jsxs)("div",{className:"data",children:[Object(p.jsx)(pt,{name:"Name",value:r}),Object(p.jsx)(pt,{name:"Ability",value:c}),Object(p.jsx)(pt,{name:"First train",value:j?Object(it.a)(j,{addSuffix:!0}):"None"}),Object(p.jsx)(pt,{name:"Suit",value:l.length?Object(p.jsx)(st,{colors:l}):"None"}),Object(p.jsx)(pt,{name:"Last power",value:(null===(t=u[1])||void 0===t?void 0:t.power)||0}),Object(p.jsx)(pt,{name:"Power",value:s}),Object(p.jsx)(pt,{name:"Owner",value:(null===i||void 0===i?void 0:i.username)||"None"}),Object(p.jsx)(pt,{name:"Price",value:o})]})]})}function pt(e){var t=e.name,n=e.value;return Object(p.jsxs)("div",{className:"hero-field",children:[Object(p.jsxs)("h3",{children:[t," "]}),Object(p.jsx)("div",{children:n})]})}var jt=n(10),dt=n(20),bt=n(157),ft=n(92);function mt(e){var t,n=e.trainingHistory,r=[],c=[],a=Object(jt.a)(n);try{for(a.s();!(t=a.n()).done;){var l=t.value;r.push(Object(bt.a)(new Date(l.date),"dd/MM h:m")),c.push(l.power)}}catch(u){a.e(u)}finally{a.f()}var s={labels:r.reverse(),datasets:[{label:"Power",data:c.reverse(),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]};return Object(p.jsxs)("section",{className:"hero-progress",children:[Object(p.jsx)("h2",{className:"text-center",children:"Progress"}),Object(p.jsx)(ft.a,{data:s,options:{responsive:!0,plugins:{legend:{display:!1}}}})]})}function ht(){var e=Object(o.g)().id,t=Object(o.f)(),n=Object(r.useState)(null),c=Object(S.a)(n,2),a=c[0],l=c[1];return Object(r.useEffect)((function(){var t=function(){var t=Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ke.query({_id:e});case 3:n=t.sent,l(n[0]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),et({message:"Could not get hero data",type:"error"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[e]),a?Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("main",{className:"content hero-page",children:[Object(p.jsx)("button",{className:"btn-link",onClick:function(){return t(-1)},children:"Back"}),Object(p.jsx)(ot,{hero:a}),Object(p.jsx)(mt,{trainingHistory:a.trainingHistory})]})}):Object(p.jsx)(We,{})}dt.d.register(dt.c,dt.i,dt.k,dt.h,dt.o,dt.p,dt.f);var Ot=n(159),xt=n(158);function vt(){var e=Je(),t=Object(i.c)((function(e){return e.systemModule.alert})),n=Object(i.b)(),c=Object(o.f)();Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(be());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),n(et({message:"Could not get logged in user",type:"error"}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(r.useEffect)((function(){e||(console.info("No user, redirecting to login"),c("/login"))}),[c,e]);return Object(p.jsxs)("div",{className:"app main-layout",children:[Object(p.jsx)(fe,{user:e}),Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{path:"/",element:Object(p.jsx)(tt,{})}),Object(p.jsx)(o.a,{path:"/login",element:Object(p.jsx)(at,{})}),Object(p.jsx)(o.a,{path:"/explore",element:Object(p.jsx)(lt,{})}),Object(p.jsx)(o.a,{path:"/add",element:Object(p.jsx)(ut,{})}),Object(p.jsx)(o.a,{path:"/hero/:id",element:Object(p.jsx)(ht,{})}),Object(p.jsx)(o.a,{path:"*",element:Object(p.jsx)(tt,{})})]}),Object(p.jsx)(j,{}),t&&Object(p.jsx)(Ot.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,autoHideDuration:6e3,onClose:function(){n(et(null))},children:Object(p.jsx)(xt.a,{severity:t.type,children:t.message})})]})}n(133);var gt=n(58),yt=n(90),wt={alert:null};var Et={user:pe.getCurrentUser()};var kt=Object(gt.b)({userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;return"SET_USER"===t.type?Object(nt.a)(Object(nt.a)({},e),{},{user:t.user}):e},systemModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;return"SET_ALERT"===t.type?Object(nt.a)(Object(nt.a)({},e),{},{alert:t.alert}):e}}),Ct=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||gt.c,Nt=Object(gt.d)(kt,Ct(Object(gt.a)(yt.a)));a.a.render(Object(p.jsx)(i.a,{store:Nt,children:Object(p.jsx)(A.a,{children:Object(p.jsx)(vt,{})})}),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.738e441b.chunk.js.map